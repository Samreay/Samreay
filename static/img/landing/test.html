<html>
  <style>
    .card {
      width: 300px;
      height: 480px;
      display: block;
      margin-bottom: 20px;
    }
    .card video {
      width: 100%;
    }

    :root {
      --mx: 50%;
      --my: 50%;
      --s: 1;
      --o: 0;
      --tx: 0px;
      --ty: 0px;
      --rx: 0deg;
      --ry: 0deg;
      --pos: 50% 50%;
      --posx: 50%;
      --posy: 50%;
      --hyp: 0;
    }
    body {
      perspective: 10000px;
    }
    .card * {
      transform-style: preserve-3d;
    }
    .card {
      --radius: 4.55% / 3.5%;
      z-index: calc(var(--s) * 100);
      transform: translate3d(0, 0, 0.1px);
      will-change: transform, visibility;
      z-index: calc(var(--s) * 100);
      transform: translateZ(0.1px);
      will-change: transform, visibility;
    }
    .card_translator {
      perspective: 600px;
      display: grid;
      transform-origin: center;
    }
    .card_rotator {
      --glow: #69d1e9;
      transform: rotateY(var(--rx)) rotateX(var(--ry));
      transform-style: preserve-3d;
      box-shadow: 0px 10px 20px -5px black;
      border-radius: var(--radius);
      display: grid;
      perspective: 600px;
      outline: none;
      position: relative;
      transition: box-shadow 0.4s ease, outline 0.2s ease;
      will-change: transform;
    }

    .card_layer {
      display: grid;
      grid-area: 1/1;
    }

    .card_effect {
      z-index: 3;
      mix-blend-mode: color-dodge;
      opacity: var(--o);
    }

    .card_glare {
      transform: translateZ(1px);
      z-index: 4;
      background: radial-gradient(
        farthest-corner circle at var(--mx) var(--my),
        rgba(255, 255, 255, 0.8) 10%,
        rgba(255, 255, 255, 0.65) 20%,
        rgba(0, 0, 0, 0.5) 90%
      );
      mix-blend-mode: overlay;
      opacity: var(--o);
      width: 100%;
      height: 100%;
    }

    .card_shine {
      --space: 5%;
      --angle: -22deg;
      --imgsize: 200% 400%;
      background-image: repeating-linear-gradient(
        var(--angle),
        rgba(174, 102, 202, 0.75) calc(var(--space) * 1),
        rgba(228, 77, 72, 0.75) calc(var(--space) * 2),
        rgba(216, 197, 55, 0.75) calc(var(--space) * 3),
        rgba(124, 201, 62, 0.75) calc(var(--space) * 4),
        rgba(80, 177, 170, 0.75) calc(var(--space) * 5),
        rgba(136, 160, 255, 0.75) calc(var(--space) * 6),
        rgba(176, 105, 204, 0.75) calc(var(--space) * 7)
      );
      background-blend-mode: color-dodge;
      background-size: var(--imgsize), 300%, 200%;
      background-position: 0% calc(var(--posy) * 1), var(--posx) var(--posy);

      filter: brightness(calc((var(--hyp) * 0.3) + 0.3)) contrast(2.3)
        saturate(1.1);
    }
    .card_shine:after {
      content: "";
      background-image: radial-gradient(
        farthest-corner ellipse at calc(((var(--mx)) * 0.5) + 25%)
          calc(((var(--my)) * 0.5) + 25%),
        rgb(255, 255, 255) 5%,
        rgba(55, 0, 55, 0.6) 25%,
        rgb(55, 55, 55) 90%
      );
      background-position: center;
      background-size: 200% 200%;
      filter: brightness(calc((var(--hyp) * 0.4) + 0.4)) contrast(0.85)
        saturate(1.1);
      mix-blend-mode: hard-light;
    }
  </style>
  <body>
    <div class="card">
      <div class="card_translator">
        <div class="card_rotator">
          <div class="video card_layer">
            <video preload playsinline plays-inline autoplay loop muted>
              <source
                src="https://cosmiccoding.com.au/static/img/landing/soul_relic.mp4"
                type="video/mp4"
              />
            </video>
          </div>
          <div class="card_layer card_effect card_glare"></div>
          <div class="card_layer card_effect card_shine"></div>
        </div>
      </div>
    </div>
    <div class="card">
        <div class="card_translator">
          <div class="card_rotator">
            <div class="video card_layer">
              <video preload playsinline plays-inline autoplay loop muted>
                <source
                  src="https://cosmiccoding.com.au/static/img/landing/soul_relic.mp4"
                  type="video/mp4"
                />
              </video>
            </div>
            <div class="card_layer card_effect card_glare"></div>
          </div>
        </div>
      </div>
    <script>
      const saveCursorPosition = function (x, y) {
        cards = document.querySelectorAll(".card");

        cards.forEach((card) => {
          var rect = card.getBoundingClientRect();
          const absolute = {
            x: x - rect.left,
            y: y - rect.top,
          };
          const percent = {
            x: Math.round((100 / rect.width) * absolute.x),
            y: Math.round((100 / rect.height) * absolute.y),
          };
          const center = {
            x: percent.x - 50,
            y: percent.y - 50,
          };
          if (Math.abs(center.x) > 55 || Math.abs(center.y) > 55) {
            card.style.removeProperty("--posx");
            card.style.removeProperty("--posy");
            card.style.removeProperty("--mx");
            card.style.removeProperty("--my");
            card.style.removeProperty("--rx");
            card.style.removeProperty("--ry");
            card.style.removeProperty("--o");
            card.style.removeProperty("--hyp");
          } else {
            const background = {
              x: Math.round(50 + percent.x / 4 - 12.5),
              y: Math.round(50 + percent.y / 3 - 16.67),
            };
            const normCenter = {
              x: (percent.x - 50) / 50.0,
              y: (percent.y - 50) / 50.0,
            };
            const boundedCenter = {
              x: Math.min(Math.max(normCenter.x, -1), 1),
              y: Math.min(Math.max(normCenter.y, -1), 1),
            };
            const hyp = Math.sqrt(
              normCenter.x * normCenter.x + normCenter.y * normCenter.y
            );
            const rot = {
              x: Math.pow(normCenter.x / 1.1, 9) - normCenter.x / 1.1,
              y: Math.pow(normCenter.y / 1.1, 9) - normCenter.y / 1.1,
            };
            card.style.setProperty("--posx", background.x + "%");
            card.style.setProperty("--posy", background.y + "%");
            card.style.setProperty("--mx", percent.x + "%");
            card.style.setProperty("--my", percent.y + "%");
            card.style.setProperty("--rx", 10 * rot.x + "deg");
            card.style.setProperty("--ry", -10 * rot.y + "deg");
            card.style.setProperty("--o", 1.0);
            card.style.setProperty("--hyp", hyp);
          }
        });
      };

      document.addEventListener("mousemove", (e) => {
        saveCursorPosition(e.clientX, e.clientY);
      });
    </script>
  </body>
</html>
