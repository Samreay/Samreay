<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Getting started with Boost, Python, and Numpy - Samuel Hinton</title><link rel=stylesheet href="https://cosmiccoding.com.au/css/main.min.f97531dbcfa76c58822e21d7ec7cb2612e5bb7e7785e16d1aeeef3f61bbae184.css" integrity="sha256-+XUx28+nbFiCLiHX7HyyYS5bt+d4XhbRru7z9hu64YQ="><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel="shortcut icon" href=https://cosmiccoding.com.au/img/favicon.png type=image/x-icon></head><meta name=description content="After failing to find a tutorial that was actually complete, I decided to make one myself."><meta name=robots content="noodp"><link rel=canonical href=https://cosmiccoding.com.au/tutorials/boost/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cosmiccoding.com.au/tutorials/boost/cover.png"><meta name=twitter:title content="Getting started with Boost, Python, and Numpy"><meta name=twitter:description content="After failing to find a tutorial that was actually complete, I decided to make one myself."><meta property="og:title" content="Getting started with Boost, Python, and Numpy"><meta property="og:description" content="After failing to find a tutorial that was actually complete, I decided to make one myself."><meta property="og:type" content="article"><meta property="og:url" content="https://cosmiccoding.com.au/tutorials/boost/"><meta property="og:image" content="https://cosmiccoding.com.au/tutorials/boost/cover.png"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2020-07-04T00:00:00+00:00"><meta property="article:modified_time" content="2020-07-04T00:00:00+00:00"><meta property="article:section" content="tutorial"><meta property="article:published_time" content="2020-07-04 00:00:00 +0000 UTC"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Getting started with Boost, Python, and Numpy","genre":"tutorial","url":"https:\/\/cosmiccoding.com.au\/tutorials\/boost\/","datePublished":"2020-07-04 00:00:00 \u002b0000 UTC","description":"After failing to find a tutorial that was actually complete, I decided to make one myself.","author":{"@type":"Person","name":""}}</script><body><div class="flex flex-col min-h-screen overflow-hidden"><header class="absolute w-full z-30"><div class="max-w-6xl mx-auto px-4 sm:px-6"><div class="flex items-center justify-between h-20"><div class="flex-shrink-0 mr-4"><a class=block href=/ aria-label="Samuel Hinton"><h2 class=logo>SRH</h2></a></div><nav class="hidden md:flex md:flex-grow"><ul class="flex flex-grow justify-end flex-wrap items-center"><li><a href=/#books class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">Books</a></li><li><a href=/reviews class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">Reviews</a></li><li><a href=/tutorials class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">Tutorials</a></li><li><a href=/blogs class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">Blog</a></li><li><a href=/#courses class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">Courses</a></li><li><a href=/static/resume/HintonCV.pdf class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">CV</a></li></ul></nav><div class=md:hidden x-data="{ expanded: false }"><button class=hamburger :class="{ 'active': expanded }" @click.stop="expanded = !expanded" aria-controls=mobile-nav :aria-expanded=expanded>
<span class=sr-only>Menu</span><svg class="w-6 h-6 fill-current text-gray-300 hover:text-gray-200 transition duration-150 ease-in-out" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><rect y="4" width="24" height="2" rx="1"/><rect y="11" width="24" height="2" rx="1"/><rect y="18" width="24" height="2" rx="1"/></svg></button><nav id=mobile-nav class="absolute top-full z-20 left-0 w-full px-4 sm:px-6 overflow-hidden transition-all duration-300 ease-in-out" x-ref=mobileNav :style="expanded ? 'max-height: ' + $refs.mobileNav.scrollHeight + 'px; opacity: 1' : 'max-height: 0; opacity: .8'" @click.away="expanded = false" @keydown.escape.window="expanded = false" x-cloak><ul class="bg-gray-800 px-4 py-2"><li><a href=/#books class="flex text-gray-300 hover:text-gray-200 py-2">Books</a></li><li><a href=/reviews class="flex text-gray-300 hover:text-gray-200 py-2">Reviews</a></li><li><a href=/tutorials class="flex text-gray-300 hover:text-gray-200 py-2">Tutorials</a></li><li><a href=/blogs class="flex text-gray-300 hover:text-gray-200 py-2">Blog</a></li><li><a href=/#courses class="flex text-gray-300 hover:text-gray-200 py-2">Courses</a></li><li><a href=/static/resume/HintonCV.pdf class="flex text-gray-300 hover:text-gray-200 py-2">CV</a></li></ul></nav></div></div></div></header><div class=flex-grow><div id=post-container class="content content-wider blog-post relative"><div class="section-header blog"><h1 class=title>Getting started with Boost, Python, and Numpy</h1><p>6th July 2020</p><p>After failing to find a tutorial that was actually complete, I decided to make one myself.</p></div><div><ul class="grid gap-6 w-full md:grid-cols-2" style=list-style:none;padding-left:0><li><input type=radio id=show-code name=code-toggle value=show-code class="hidden peer" onchange=clickCheckbox(this) required checked>
<label for=show-code class="inline-flex justify-between items-center p-5 w-full text-gray-500 bg-gray-800 rounded-lg border border-gray-200 cursor-pointer peer-checked:border-2 peer-checked:border-main-300 peer-checked:text-white peer-checked:bg-gray-700 hover:text-gray-200 hover:bg-gray-700"><div class="block w-full"><div class="w-full text-center text-lg font-semibold">Show me everything!</div><div class="w-full text-center text-sm">Oh yeah, coding time.</div></div></label></li><li><input type=radio id=hide-code name=code-toggle value=hide-code class="hidden peer" onchange=clickCheckbox(this)>
<label for=hide-code class="inline-flex justify-between items-center p-5 w-full text-gray-500 bg-gray-800 rounded-lg border border-gray-200 cursor-pointer peer-checked:border-2 peer-checked:border-main-300 peer-checked:text-white peer-checked:bg-gray-700 hover:text-gray-200 hover:bg-gray-700"><div class="block w-full"><div class="w-full text-center text-lg font-semibold">Just the plots</div><div class="w-full text-center text-sm">Code is nasty.</div></div></label></li></ul></div><script>function clickCheckbox(e){e.id=="show-code"?document.getElementById("post-container").classList.remove("hide-code"):document.getElementById("post-container").classList.add("hide-code")}</script><p>As much as we might want all code that we work with to be professional-quality packages in the same language we are working in, it simply won&rsquo;t be the case for the vast majority of us.</p><p>Recently, I was investigating how we could replace some perl wrappers that executed C code with something more pythonic. I came across <a href=https://www.boost.org/>boost</a> - a package designed to try and make exposing C/C++ interfaces a bit simpler to python programs. Well, it includes other languages too, but I&rsquo;m going to give the python example.</p><h2 id=setting-up-boost>Setting up boost</h2><p>Ostensibly, boost installs on both windows and *nix systems. Not wanting to risk compilation issues, I opened up my <a href=https://docs.microsoft.com/en-us/windows/wsl/install-win10>Ubuntu subsystem in windows</a></p><p>Perhaps you&rsquo;ve already got boost installed, in which case, skip this section, but for completeness, here is what I did.</p><p><strong>Step 1:</strong> Downloaded the <a href=https://dl.bintray.com/boostorg/release/1.73.0/source/boost_1_73_0.tar.gz>boost 1.73.0 source tarball</a> to my home directory and extracted it with the normal</p><div class="reduced-code width-27" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar -xf boost_1_73_0.tar.gz
</span></span></code></pre></div></div><p><strong>Step 2:</strong> Installed a bunch of developer dependencies:</p><div class="expanded-code width-120" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install build-essential g++ python-dev autotools-dev libicu-dev build-essential libbz2-dev libboost-all-dev
</span></span></code></pre></div></div><p><strong>Step 3:</strong> Went into the extracted boostrap folder and set up the boostrap and specified to build the python libraries:</p><div class="reduced-code width-53" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./bootstrap.sh --prefix<span style=color:#ff6ac1>=</span>/usr/ --with-libraries<span style=color:#ff6ac1>=</span>python
</span></span></code></pre></div></div><p><strong>Step 4:</strong> Notice that compilation was failing because anaconda has a slightly different include path than the default python installer (their folder is called python3.7m instead of python3.7). So I opened the <code>project-config.jam</code> file in the main boost folder, found the section with a label <code>#Python configuration</code> and added my anaconda locations in explicitly:</p><div class="expanded-code width-99" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#78787e># Python configuration</span>
</span></span><span style=display:flex><span>import python ;
</span></span><span style=display:flex><span><span style=color:#ff6ac1>if</span> ! <span style=color:#ff6ac1>[</span> python.configured <span style=color:#ff6ac1>]</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>{</span>
</span></span><span style=display:flex><span>    using python : 3.7 : <span style=color:#5af78e>&#34;/home/samreay/miniconda3&#34;</span> : /home/samreay/miniconda3/include/python3.7m ;
</span></span><span style=display:flex><span><span style=color:#ff6ac1>}</span>
</span></span></code></pre></div></div><p><strong>Step 5:</strong> Installed into the <code>usr</code> folder:</p><div class="reduced-code width-17" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ./b2 install
</span></span></code></pre></div></div><p>And once that was all done, I made sure that under my <code>/usr/lib</code> folder I had some <code>libboost</code> files - at least ones for python and numpy specifically. For me, debugging compilation issues and fixing the path means it took about 3 hours to do this. I&rsquo;m hoping with the instructions above it takes you far less time!</p><p><div><figure class=rounded><picture><source srcset=/tutorials/boost/2020-07-04-Boost_files/2020-07-04-Boost_1_0_hue92e2ed2033853ad791cda0a99c580c4_50960_1277x0_resize_q90_h2_box_3.webp width=1277 height=374 type=image/webp><source srcset=/tutorials/boost/2020-07-04-Boost_files/2020-07-04-Boost_1_0.png width=1277 height=374 type=image/png><img width=1277 height=374 loading=lazy decoding=async alt=png src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPMn7vLFAAFRgH97g1QygAAAABJRU5ErkJggg=="></picture></figure></div></p><h2 id=setting-up-a-basic-numpy-example>Setting up a basic Numpy example</h2><p>I don&rsquo;t want a useless hello world example, I want an example closer to what I&rsquo;m doing, which is passing data back and forth. So let us make an example C++ function, that takes an input numpy array and returns an output array which is two elements long. The two elements will be the sum of the array, and the number of elements in it. Simple.</p><p>In python, this would just be:</p><div class="reduced-code width-28" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>python_count_and_sum</span>(x):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> np<span style=color:#ff6ac1>.</span>sum(x), <span style=color:#ff5c57>len</span>(x)
</span></span></code></pre></div></div><p>But in C++, sticking to arrays (as it makes it closer to C, although it means no <code>std::vector</code> use), I have:</p><div class=width-61 markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#9aedfe>void</span> <span style=color:#57c7ff>count_and_sum</span>(<span style=color:#9aedfe>double</span><span style=color:#ff6ac1>*</span> array, <span style=color:#9aedfe>int</span> num, <span style=color:#9aedfe>double</span> output[]) {
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>double</span> sum <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>0.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>for</span> (<span style=color:#9aedfe>int</span> i <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>0</span>; i <span style=color:#ff6ac1>&lt;</span> num; <span style=color:#ff6ac1>++</span>i) {
</span></span><span style=display:flex><span>        sum <span style=color:#ff6ac1>+=</span> array[i];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#78787e>// Set output values
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    output[<span style=color:#ff9f43>0</span>] <span style=color:#ff6ac1>=</span> sum;
</span></span><span style=display:flex><span>    output[<span style=color:#ff9f43>1</span>] <span style=color:#ff6ac1>=</span> (<span style=color:#9aedfe>double</span>)num;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><p>In fact, lets skip dripping the code out piece by piece. Here&rsquo;s the entire C++ file, which I named <code>example.cpp</code>. The name of the file is important, because it should match what you put in <code>BOOST_PYTHON_MODULE</code> (or moreso the library you make needs to have that name). Just keep them all consistent and save yourself a headache.</p><div class="expanded-code width-92" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#78787e>#include</span> <span style=color:#78787e>&lt;boost/python/numpy.hpp&gt;</span><span style=color:#78787e>
</span></span></span><span style=display:flex><span><span style=color:#78787e>#include</span> <span style=color:#78787e>&lt;boost/scoped_array.hpp&gt;</span><span style=color:#78787e>
</span></span></span><span style=display:flex><span><span style=color:#78787e>#include</span> <span style=color:#78787e>&lt;iostream&gt;</span><span style=color:#78787e>
</span></span></span><span style=display:flex><span><span style=color:#78787e>#include</span> <span style=color:#78787e>&lt;bits/stdc++.h&gt; </span><span style=color:#78787e>
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>using</span> <span style=color:#ff6ac1>namespace</span> std;
</span></span><span style=display:flex><span><span style=color:#ff6ac1>namespace</span> p <span style=color:#ff6ac1>=</span> boost<span style=color:#ff6ac1>::</span>python;
</span></span><span style=display:flex><span><span style=color:#ff6ac1>namespace</span> np <span style=color:#ff6ac1>=</span> boost<span style=color:#ff6ac1>::</span>python<span style=color:#ff6ac1>::</span>numpy;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>// Actual C++/C code here that does everything
</span></span></span><span style=display:flex><span><span style=color:#78787e></span><span style=color:#9aedfe>void</span> <span style=color:#57c7ff>count_and_sum</span>(<span style=color:#9aedfe>double</span><span style=color:#ff6ac1>*</span> array, <span style=color:#9aedfe>int</span> num, <span style=color:#9aedfe>double</span> output[]) {
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>double</span> sum <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>0.0</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>for</span> (<span style=color:#9aedfe>int</span> i <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>0</span>; i <span style=color:#ff6ac1>&lt;</span> num; <span style=color:#ff6ac1>++</span>i) {
</span></span><span style=display:flex><span>        sum <span style=color:#ff6ac1>+=</span> array[i];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>     
</span></span><span style=display:flex><span>    <span style=color:#78787e>// Set output values
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    output[<span style=color:#ff9f43>0</span>] <span style=color:#ff6ac1>=</span> sum;
</span></span><span style=display:flex><span>    output[<span style=color:#ff9f43>1</span>] <span style=color:#ff6ac1>=</span> (<span style=color:#9aedfe>double</span>)num;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>// A few translators here to ensure that numpy datatypes convert to pointers and what not
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>np<span style=color:#ff6ac1>::</span>ndarray wrap_count_and_sum(np<span style=color:#ff6ac1>::</span>ndarray <span style=color:#ff6ac1>const</span> <span style=color:#ff6ac1>&amp;</span> array) {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#78787e>// Make sure we get doubles
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    <span style=color:#ff6ac1>if</span> (array.get_dtype() <span style=color:#ff6ac1>!=</span> np<span style=color:#ff6ac1>::</span>dtype<span style=color:#ff6ac1>::</span>get_builtin<span style=color:#ff6ac1>&lt;</span><span style=color:#9aedfe>double</span><span style=color:#ff6ac1>&gt;</span>()) {
</span></span><span style=display:flex><span>        PyErr_SetString(PyExc_TypeError, <span style=color:#5af78e>&#34;Incorrect array data type&#34;</span>);
</span></span><span style=display:flex><span>        p<span style=color:#ff6ac1>::</span>throw_error_already_set();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#78787e>// Could also pass back a vector, but unsure if you use C++ or C
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    <span style=color:#ff6ac1>static</span> <span style=color:#9aedfe>double</span> output[<span style=color:#ff9f43>2</span>]; <span style=color:#78787e>// the static here is important, keeps it around!
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    count_and_sum(<span style=color:#ff6ac1>reinterpret_cast</span><span style=color:#ff6ac1>&lt;</span><span style=color:#9aedfe>double</span><span style=color:#ff6ac1>*&gt;</span>(array.get_data()), array.shape(<span style=color:#ff9f43>0</span>), output);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:#78787e>// Turning the output into a numpy array
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    np<span style=color:#ff6ac1>::</span>dtype dt <span style=color:#ff6ac1>=</span> np<span style=color:#ff6ac1>::</span>dtype<span style=color:#ff6ac1>::</span>get_builtin<span style=color:#ff6ac1>&lt;</span><span style=color:#9aedfe>double</span><span style=color:#ff6ac1>&gt;</span>();
</span></span><span style=display:flex><span>    p<span style=color:#ff6ac1>::</span>tuple shape <span style=color:#ff6ac1>=</span> p<span style=color:#ff6ac1>::</span>make_tuple(<span style=color:#ff9f43>2</span>); <span style=color:#78787e>// It has shape (2,)
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    p<span style=color:#ff6ac1>::</span>tuple stride <span style=color:#ff6ac1>=</span> p<span style=color:#ff6ac1>::</span>make_tuple(<span style=color:#ff6ac1>sizeof</span>(<span style=color:#9aedfe>double</span>)); <span style=color:#78787e>// 1D array, so its just size of double
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    np<span style=color:#ff6ac1>::</span>ndarray result <span style=color:#ff6ac1>=</span> np<span style=color:#ff6ac1>::</span>from_data(output, dt, shape, stride, p<span style=color:#ff6ac1>::</span>object());
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> result;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#78787e>// Deciding what to expose in the library python can import
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>BOOST_PYTHON_MODULE(example) {  <span style=color:#78787e>// Thing in brackets should match output library name
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    Py_Initialize();
</span></span><span style=display:flex><span>    np<span style=color:#ff6ac1>::</span>initialize();
</span></span><span style=display:flex><span>    p<span style=color:#ff6ac1>::</span>def(<span style=color:#5af78e>&#34;count_and_sum&#34;</span>, wrap_count_and_sum);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><p>Lets break it down. The first function is the &ldquo;original&rdquo; C++ code which I want to interface with. To do this, I write a wrapper function, which handles turning all the numpy arrays into C arrays, and vice-versa. Note that adding some type checking here will save you a lot of hassle in the future given how easy it is to mix up numeric types in python.</p><p>After the translator, we use <code>BOOST_PYTHON_MODULE</code> to initialise the python and numpy components, and then declare that we are exposing the function <code>wrap_count_and_sum</code> under the name <code>count_and_sum</code>.</p><p>So, with this C++ code written, time to compile.</p><div class="expanded-code width-137" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>g++ -Wall -Wextra -fPIC -shared -I/home/samreay/miniconda3/include/python3.7m/ example.cpp -o example.so -lboost_python37 -lboost_numpy37
</span></span></code></pre></div></div><p>Interestingly, it only works for me if the libraries go in after the output name.</p><p>So this produces the output <code>example.so</code>. <strong>This is what you can directly import as a python module. You do not need to turn the <code>.so</code> into a <code>.py</code> file, it is all done.</strong></p><p>So how can we use it? Super easily:</p><div class="reduced-code width-55" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff6ac1>import</span> numpy <span style=color:#ff6ac1>as</span> np
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import</span> example
</span></span><span style=display:flex><span>x <span style=color:#ff6ac1>=</span> np<span style=color:#ff6ac1>.</span>array([<span style=color:#ff9f43>1</span>, <span style=color:#ff9f43>2</span>, <span style=color:#ff9f43>3</span>, <span style=color:#ff9f43>4</span>, <span style=color:#ff9f43>5</span>])
</span></span><span style=display:flex><span><span style=color:#ff5c57>sum</span>, count <span style=color:#ff6ac1>=</span> example<span style=color:#ff6ac1>.</span>count_and_sum(x<span style=color:#ff6ac1>.</span>astype(np<span style=color:#ff6ac1>.</span>double))
</span></span><span style=display:flex><span><span style=color:#ff5c57>print</span>(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;Sum is </span><span style=color:#5af78e>{</span><span style=color:#ff5c57>sum</span><span style=color:#5af78e>}</span><span style=color:#5af78e> from </span><span style=color:#5af78e>{</span>count<span style=color:#5af78e>}</span><span style=color:#5af78e> elements&#34;</span>)
</span></span></code></pre></div></div><p><div><figure class=rounded><picture><source srcset=/tutorials/boost/2020-07-04-Boost_files/2020-07-04-Boost_5_0_hue168ecb5ca63e7bf48ab1020f2f6a023_35450_966x0_resize_q90_h2_box_3.webp width=966 height=315 type=image/webp><source srcset=/tutorials/boost/2020-07-04-Boost_files/2020-07-04-Boost_5_0.png width=966 height=315 type=image/png><img width=966 height=315 loading=lazy decoding=async alt=png src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPMn7vLFAAFRgH97g1QygAAAABJRU5ErkJggg=="></picture></figure></div></p><p>You can see that we don&rsquo;t need to do anything else. Import the <code>.so</code> file, and call it just like any other python function.</p><p><a href=/static/notebooks/boost/boost.zip><strong>You can find the C++, Python and install.txt files here for convenience.</strong></a></p><p>Good luck!</p><p><div><figure class="img-main rounded"><picture><source srcset=/tutorials/boost/cover_hu2ec1a4cae18d33829a86b88a7ff223b3_391991_1000x0_resize_q90_h2_box_3.webp width=1000 height=650 type=image/webp><source srcset=/tutorials/boost/cover.png width=1000 height=650 type=image/png><img width=1000 height=650 loading=lazy decoding=async alt=png src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mPMn7vLFAAFRgH97g1QygAAAABJRU5ErkJggg=="></picture></figure></div></p><hr><p>For your convenience, here&rsquo;s the code in one block:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>python_count_and_sum</span>(x):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> np<span style=color:#ff6ac1>.</span>sum(x), <span style=color:#ff5c57>len</span>(x)
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import</span> numpy <span style=color:#ff6ac1>as</span> np
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import</span> example
</span></span><span style=display:flex><span>x <span style=color:#ff6ac1>=</span> np<span style=color:#ff6ac1>.</span>array([<span style=color:#ff9f43>1</span>, <span style=color:#ff9f43>2</span>, <span style=color:#ff9f43>3</span>, <span style=color:#ff9f43>4</span>, <span style=color:#ff9f43>5</span>])
</span></span><span style=display:flex><span><span style=color:#ff5c57>sum</span>, count <span style=color:#ff6ac1>=</span> example<span style=color:#ff6ac1>.</span>count_and_sum(x<span style=color:#ff6ac1>.</span>astype(np<span style=color:#ff6ac1>.</span>double))
</span></span><span style=display:flex><span><span style=color:#ff5c57>print</span>(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;Sum is </span><span style=color:#5af78e>{</span><span style=color:#ff5c57>sum</span><span style=color:#5af78e>}</span><span style=color:#5af78e> from </span><span style=color:#5af78e>{</span>count<span style=color:#5af78e>}</span><span style=color:#5af78e> elements&#34;</span>)
</span></span></code></pre></div><div class="relative max-w-xl mx-auto my-20"><div class="fancy_card horizontal"><div class=card_translator><div class="card_rotator tiny_rot card_layer"><div class="card_layer newsletter p-2"><div class="newsletter-inner h-full"><div class="relative h-full sib-form-container" id=sib-form-container><div class="mb-6 lg:mb-12 text-center"><h3 class="text-main-200 mb-2 lg:mb-8">Stay in the loop!</h3><p class="text-main-100 text-lg text-opacity-70">For new releases, exclusive giveaways, and reviews.</p></div><form action="https://Cosmiccoding.us5.list-manage.com/subscribe/post?u=aebe5de1d2e40dccb3aeca491&id=3987dd4a1f" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class="validate w-full" target=_blank novalidate><div><input type=email class="w-full appearance-none bg-main-600 mb-4 border border-main-600 bg-opacity-5 focus:border-main-300 rounded-sm px-4 py-3 text-main-100 placeholder-main-100 required" placeholder="Your best email…" aria-label="Your best email…" name=EMAIL required data-required=true id=EMAIL><div style=position:absolute;left:-5000px aria-hidden=true><input type=text name=b_aebe5de1d2e40dccb3aeca491_3987dd4a1f tabindex=-1></div><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class="button btn bg-main-600 hover:bg-main-400 shadow w-full"></div><p id=mce-error-response style=display:none class="text-center mt-2 opacity-50 text-main-200">There was a problem, please try again.</p><p id=mce-success-response style=display:none class="text-center mt-2 opacity-50 text-main-200">Thanks mate, won't let ya down.</p></form></div></div></div><div class="card_layer card_effect card_soft_glare" style=pointer-events:none></div></div></div></div></div></div><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script></div><script language=javascript type=text/javascript src=https://cosmiccoding.com.au/js/main.min.11673d10a962fb5205229607e62ea1d23424d35dad33db7bfe2a09a63d5409fa.js></script>
<script async defer src="https://www.googletagmanager.com/gtag/js?id=G-GRX6QE03YR"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GRX6QE03YR")</script></div></body></html>