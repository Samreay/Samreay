<!doctype html><html lang=en-gb><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Handy Python Decorators - Samuel Hinton</title><link rel=stylesheet href="https://cosmiccoding.com.au/css/main.min.5885372f23ef07b79bc16e6f2da719ab7aef8e679a9f36a46a5dfe568f4d60e7.css" integrity="sha256-WIU3LyPvB7ebwW5vLacZq3rvjmeanzakal3+Vo9NYOc="><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel="shortcut icon" href=https://cosmiccoding.com.au/img/favicon.png type=image/x-icon></head><meta name=description content="A short example on how to use decorators in your code to provide extra functionality"><meta name=robots content="noodp"><link rel=canonical href=https://cosmiccoding.com.au/tutorials/handy_python_decorators/><meta name=twitter:card content="summary"><meta name=twitter:title content="Handy Python Decorators"><meta name=twitter:description content="A short example on how to use decorators in your code to provide extra functionality"><meta property="og:title" content="Handy Python Decorators"><meta property="og:description" content="A short example on how to use decorators in your code to provide extra functionality"><meta property="og:type" content="article"><meta property="og:url" content="https://cosmiccoding.com.au/tutorials/handy_python_decorators/"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2020-06-18T00:00:00+00:00"><meta property="article:modified_time" content="2020-06-18T00:00:00+00:00"><meta property="article:section" content="tutorial"><meta property="article:published_time" content="2020-06-18 00:00:00 +0000 UTC"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Handy Python Decorators","genre":"tutorial","url":"https:\/\/cosmiccoding.com.au\/tutorials\/handy_python_decorators\/","datePublished":"2020-06-18 00:00:00 \u002b0000 UTC","description":"A short example on how to use decorators in your code to provide extra functionality","author":{"@type":"Person","name":""}}</script><body><div class="flex flex-col min-h-screen overflow-hidden"><header class="absolute w-full z-30"><div class="max-w-6xl mx-auto px-4 sm:px-6"><div class="flex items-center justify-between h-20"><div class="flex-shrink-0 mr-4"><a class=block href=/ aria-label="Samuel Hinton"><h2 class=logo>SRH</h2></a></div><nav class="hidden md:flex md:flex-grow"><ul class="flex flex-grow justify-end flex-wrap items-center"><li><a href=/#books class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">Books</a></li><li><a href=/reviews class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">Reviews</a></li><li><a href=/tutorials class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">Tutorials</a></li><li><a href=/blogs class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">Blog</a></li><li><a href=/#courses class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">Courses</a></li><li><a href=/static/resume/HintonCV.pdf class="text-gray-300 hover:text-gray-200 px-4 py-2 flex items-center transition duration-150 ease-in-out">CV</a></li></ul></nav><div class=md:hidden x-data="{ expanded: false }"><button class=hamburger :class="{ 'active': expanded }" @click.stop="expanded = !expanded" aria-controls=mobile-nav :aria-expanded=expanded>
<span class=sr-only>Menu</span><svg class="w-6 h-6 fill-current text-gray-300 hover:text-gray-200 transition duration-150 ease-in-out" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><rect y="4" width="24" height="2" rx="1"/><rect y="11" width="24" height="2" rx="1"/><rect y="18" width="24" height="2" rx="1"/></svg></button><nav id=mobile-nav class="absolute top-full z-20 left-0 w-full px-4 sm:px-6 overflow-hidden transition-all duration-300 ease-in-out" x-ref=mobileNav :style="expanded ? 'max-height: ' + $refs.mobileNav.scrollHeight + 'px; opacity: 1' : 'max-height: 0; opacity: .8'" @click.away="expanded = false" @keydown.escape.window="expanded = false" x-cloak><ul class="bg-gray-800 px-4 py-2"><li><a href=/#books class="flex text-gray-300 hover:text-gray-200 py-2">Books</a></li><li><a href=/reviews class="flex text-gray-300 hover:text-gray-200 py-2">Reviews</a></li><li><a href=/tutorials class="flex text-gray-300 hover:text-gray-200 py-2">Tutorials</a></li><li><a href=/blogs class="flex text-gray-300 hover:text-gray-200 py-2">Blog</a></li><li><a href=/#courses class="flex text-gray-300 hover:text-gray-200 py-2">Courses</a></li><li><a href=/static/resume/HintonCV.pdf class="flex text-gray-300 hover:text-gray-200 py-2">CV</a></li></ul></nav></div></div></div></header><div class=flex-grow><div id=post-container class="content content-wider blog-post relative"><div class="section-header blog"><h1 class=title>Handy Python Decorators</h1><p>6th June 2020</p><p>A short example on how to use decorators in your code to provide extra functionality</p></div><div><ul class="grid gap-6 w-full md:grid-cols-2" style=list-style:none;padding-left:0><li><input type=radio id=show-code name=code-toggle value=show-code class="hidden peer" onchange=clickCheckbox(this) required checked>
<label for=show-code class="inline-flex justify-between items-center p-5 w-full text-gray-500 bg-gray-800 rounded-lg border border-gray-200 cursor-pointer peer-checked:border-2 peer-checked:border-main-300 peer-checked:text-white peer-checked:bg-gray-700 hover:text-gray-200 hover:bg-gray-700"><div class="block w-full"><div class="w-full text-center text-lg font-semibold">Show me everything!</div><div class="w-full text-center text-sm">Oh yeah, coding time.</div></div></label></li><li><input type=radio id=hide-code name=code-toggle value=hide-code class="hidden peer" onchange=clickCheckbox(this)>
<label for=hide-code class="inline-flex justify-between items-center p-5 w-full text-gray-500 bg-gray-800 rounded-lg border border-gray-200 cursor-pointer peer-checked:border-2 peer-checked:border-main-300 peer-checked:text-white peer-checked:bg-gray-700 hover:text-gray-200 hover:bg-gray-700"><div class="block w-full"><div class="w-full text-center text-lg font-semibold">Just the plots</div><div class="w-full text-center text-sm">Code is nasty.</div></div></label></li></ul></div><script>function clickCheckbox(e){e.id=="show-code"?document.getElementById("post-container").classList.remove("hide-code"):document.getElementById("post-container").classList.add("hide-code")}</script><p>Decorators are something that are criminally underused in the analysis codes I have seen in academia. So, give me a few seconds to try and espouse their virtues. First, if you are new to decorators, how they work is simple: they are a function that returns a function which has wrapped another function. Simple!</p><p>It&rsquo;s easier to explain in code.</p><div class="reduced-code width-49" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>decorator</span>(fn):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>wrapper</span>(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs):
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>print</span>(<span style=color:#5af78e>&#34;Look, I&#39;ve added something here!&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>return</span> fn(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs)
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> wrapper
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff9f43>@decorator</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add(<span style=color:#ff9f43>1</span>, <span style=color:#ff9f43>2</span>)
</span></span></code></pre></div></div><pre><code>Look, I've added something here!





3
</code></pre><p>So you can see what is happening here is that by decoratoring the <code>add</code> function, when we now call <code>add</code>, we actually hit the <code>wrapper</code> function, which prints a statement, and <em>then</em> it hits the original <code>add</code> function. So the <code>@</code> syntax is the same for just a reassignment</p><div class="reduced-code width-22" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#78787e># Does the same thing:</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>add <span style=color:#ff6ac1>=</span> decorator(add)
</span></span><span style=display:flex><span>add(<span style=color:#ff9f43>1</span>, <span style=color:#ff9f43>2</span>)
</span></span></code></pre></div></div><pre><code>Look, I've added something here!





3
</code></pre><p>So this allows us to do a bunch of things. We could use it for logging. For timing functions. For trying to detect or sanitise input. For caching results (see <code>lru_cache</code> for an implementation of this that is part of the base python libraries). For a ton of things. So what you <em>could</em> have in your code base, is a collection of decorators that you can throw on and off your functions when you need them. Things not running smoothly, put a <code>@debug</code>. Want to time the function, add a <code>@timer</code>. Want to make sure a function is only run once, add <code>@run_once</code>. Examples of all of this are below.</p><p>First, lets set up logging. I add the reload because if you run this in a notebook it will already have done the basic config for you, and you wont see any logging unless you reload and re-configure it.</p><div class="expanded-code width-109" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff6ac1>import</span> logging
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import</span> importlib
</span></span><span style=display:flex><span>importlib<span style=color:#ff6ac1>.</span>reload(logging)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>logging<span style=color:#ff6ac1>.</span>basicConfig(<span style=color:#ff5c57>format</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#39;</span><span style=color:#5af78e>%(asctime)s</span><span style=color:#5af78e> </span><span style=color:#5af78e>%(levelname)s</span><span style=color:#5af78e>: </span><span style=color:#5af78e>%(message)s</span><span style=color:#5af78e>&#39;</span>, level<span style=color:#ff6ac1>=</span>logging<span style=color:#ff6ac1>.</span>DEBUG, datefmt<span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#39;%I:%M:%S&#39;</span>)
</span></span></code></pre></div></div><p>Alright, so here is a useful debug decorator:</p><div class="reduced-code width-48" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>debug</span>(fn):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>wrapper</span>(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs):
</span></span><span style=display:flex><span>        logging<span style=color:#ff6ac1>.</span>debug(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;Invoking </span><span style=color:#5af78e>{</span>fn<span style=color:#ff6ac1>.</span>__name__<span style=color:#5af78e>}</span><span style=color:#5af78e>&#34;</span>)
</span></span><span style=display:flex><span>        logging<span style=color:#ff6ac1>.</span>debug(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;  args: </span><span style=color:#5af78e>{</span>args<span style=color:#5af78e>}</span><span style=color:#5af78e>&#34;</span>)
</span></span><span style=display:flex><span>        logging<span style=color:#ff6ac1>.</span>debug(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;  kwargs: </span><span style=color:#5af78e>{</span>kwargs<span style=color:#5af78e>}</span><span style=color:#5af78e>&#34;</span>)
</span></span><span style=display:flex><span>        result <span style=color:#ff6ac1>=</span> fn(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs)
</span></span><span style=display:flex><span>        logging<span style=color:#ff6ac1>.</span>debug(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;  returned </span><span style=color:#5af78e>{</span>result<span style=color:#5af78e>}</span><span style=color:#5af78e>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>return</span> result
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> wrapper
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#ff9f43>@debug</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span></code></pre></div></div><p>And now in my code, when something looks&mldr; funky&mldr; I can just throw a quick <code>@debug</code> on the most suspicious function and ensure that it is functioning properly.</p><div class="reduced-code width-9" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>add(<span style=color:#ff9f43>1</span>, <span style=color:#ff9f43>2</span>)
</span></span></code></pre></div></div><pre><code>10:03:37 DEBUG: Invoking add
10:03:37 DEBUG:   args: (1, 2)
10:03:37 DEBUG:   kwargs: {}
10:03:37 DEBUG:   returned 3





3
</code></pre><p>Now lets get a function to figure out how long execution takes!</p><div class="reduced-code width-51" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff6ac1>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>timer</span>(fn):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>wrapper</span>(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs):
</span></span><span style=display:flex><span>        start_time <span style=color:#ff6ac1>=</span> time<span style=color:#ff6ac1>.</span>perf_counter()
</span></span><span style=display:flex><span>        result <span style=color:#ff6ac1>=</span> fn(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs)
</span></span><span style=display:flex><span>        end_time <span style=color:#ff6ac1>=</span> time<span style=color:#ff6ac1>.</span>perf_counter()
</span></span><span style=display:flex><span>        duration <span style=color:#ff6ac1>=</span> (end_time <span style=color:#ff6ac1>-</span> start_time) <span style=color:#ff6ac1>*</span> <span style=color:#ff9f43>1000</span>
</span></span><span style=display:flex><span>        logging<span style=color:#ff6ac1>.</span>debug(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;  Took </span><span style=color:#5af78e>{</span>duration<span style=color:#5af78e>:</span><span style=color:#5af78e>0.4f</span><span style=color:#5af78e>}</span><span style=color:#5af78e> ms&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>return</span> result
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> wrapper
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff9f43>@timer</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add(<span style=color:#ff9f43>3</span>, <span style=color:#ff9f43>4</span>)
</span></span></code></pre></div></div><pre><code>10:03:37 DEBUG:   Took 0.0008 ms





7
</code></pre><p>And note we can combine decorators! Want to debug <strong>and</strong> time the function?</p><div class="reduced-code width-16" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff9f43>@debug</span>
</span></span><span style=display:flex><span><span style=color:#ff9f43>@timer</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add(<span style=color:#ff9f43>5</span>, <span style=color:#ff9f43>6</span>)
</span></span></code></pre></div></div><pre><code>10:03:37 DEBUG: Invoking wrapper
10:03:37 DEBUG:   args: (5, 6)
10:03:37 DEBUG:   kwargs: {}
10:03:37 DEBUG:   Took 0.0008 ms
10:03:37 DEBUG:   returned 11





11
</code></pre><p>Note the importance of the order. Debug goes first, so its wrapper executes first, then timers wrapper, then the original function. If you swap the order, you&rsquo;ll note the time now goes up to multiple miliseconds because <code>@timer</code> is now also timing the logging!</p><p>Finally as another handy decorator, what if we want to ensure a function is only run once?</p><div class="reduced-code width-38" markdown=1><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>run_once</span>(fn):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>wrapper</span>(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs):
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>if</span> <span style=color:#ff6ac1>not</span> wrapper<span style=color:#ff6ac1>.</span>has_run:
</span></span><span style=display:flex><span>            wrapper<span style=color:#ff6ac1>.</span>has_run <span style=color:#ff6ac1>=</span> <span style=color:#ff6ac1>True</span>
</span></span><span style=display:flex><span>            <span style=color:#ff6ac1>return</span> fn(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs)
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>else</span>:
</span></span><span style=display:flex><span>            <span style=color:#ff5c57>print</span>(<span style=color:#5af78e>&#34;NO! NOT ALLOWED!&#34;</span>)
</span></span><span style=display:flex><span>    wrapper<span style=color:#ff6ac1>.</span>has_run <span style=color:#ff6ac1>=</span> <span style=color:#ff6ac1>False</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> wrapper
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff9f43>@run_once</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>print</span>(add(<span style=color:#ff9f43>6</span>, <span style=color:#ff9f43>7</span>))
</span></span><span style=display:flex><span><span style=color:#ff5c57>print</span>(add(<span style=color:#ff9f43>7</span>, <span style=color:#ff9f43>8</span>))
</span></span></code></pre></div></div><pre><code>13
NO! NOT ALLOWED!
None
</code></pre><p>In python functions are objects too, so we can attack attributes to them, like <code>has_run</code>, and then check the attribute status when executing. In the output, you can see the first <code>add</code> works fine, but then the second time we try we get a mean print message and a result of <code>None</code>. You could make this an exception if you want, I just need it to be able to execute for the write up!</p><p>Anyway, I hope this has given you some useful ideas. Having a <code>decorators</code> utility file to throw around can add value to any project you have!</p><hr><p>For your convenience, here&rsquo;s the code in one block:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>decorator</span>(fn):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>wrapper</span>(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs):
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>print</span>(<span style=color:#5af78e>&#34;Look, I&#39;ve added something here!&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>return</span> fn(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs)
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> wrapper
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff9f43>@decorator</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add(<span style=color:#ff9f43>1</span>, <span style=color:#ff9f43>2</span>)
</span></span><span style=display:flex><span><span style=color:#78787e># Does the same thing:</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>add <span style=color:#ff6ac1>=</span> decorator(add)
</span></span><span style=display:flex><span>add(<span style=color:#ff9f43>1</span>, <span style=color:#ff9f43>2</span>)
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import</span> logging
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import</span> importlib
</span></span><span style=display:flex><span>importlib<span style=color:#ff6ac1>.</span>reload(logging)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>logging<span style=color:#ff6ac1>.</span>basicConfig(<span style=color:#ff5c57>format</span><span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#39;</span><span style=color:#5af78e>%(asctime)s</span><span style=color:#5af78e> </span><span style=color:#5af78e>%(levelname)s</span><span style=color:#5af78e>: </span><span style=color:#5af78e>%(message)s</span><span style=color:#5af78e>&#39;</span>, level<span style=color:#ff6ac1>=</span>logging<span style=color:#ff6ac1>.</span>DEBUG, datefmt<span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#39;%I:%M:%S&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>debug</span>(fn):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>wrapper</span>(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs):
</span></span><span style=display:flex><span>        logging<span style=color:#ff6ac1>.</span>debug(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;Invoking </span><span style=color:#5af78e>{</span>fn<span style=color:#ff6ac1>.</span>__name__<span style=color:#5af78e>}</span><span style=color:#5af78e>&#34;</span>)
</span></span><span style=display:flex><span>        logging<span style=color:#ff6ac1>.</span>debug(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;  args: </span><span style=color:#5af78e>{</span>args<span style=color:#5af78e>}</span><span style=color:#5af78e>&#34;</span>)
</span></span><span style=display:flex><span>        logging<span style=color:#ff6ac1>.</span>debug(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;  kwargs: </span><span style=color:#5af78e>{</span>kwargs<span style=color:#5af78e>}</span><span style=color:#5af78e>&#34;</span>)
</span></span><span style=display:flex><span>        result <span style=color:#ff6ac1>=</span> fn(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs)
</span></span><span style=display:flex><span>        logging<span style=color:#ff6ac1>.</span>debug(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;  returned </span><span style=color:#5af78e>{</span>result<span style=color:#5af78e>}</span><span style=color:#5af78e>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>return</span> result
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> wrapper
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#ff9f43>@debug</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>add(<span style=color:#ff9f43>1</span>, <span style=color:#ff9f43>2</span>)
</span></span><span style=display:flex><span><span style=color:#ff6ac1>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>timer</span>(fn):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>wrapper</span>(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs):
</span></span><span style=display:flex><span>        start_time <span style=color:#ff6ac1>=</span> time<span style=color:#ff6ac1>.</span>perf_counter()
</span></span><span style=display:flex><span>        result <span style=color:#ff6ac1>=</span> fn(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs)
</span></span><span style=display:flex><span>        end_time <span style=color:#ff6ac1>=</span> time<span style=color:#ff6ac1>.</span>perf_counter()
</span></span><span style=display:flex><span>        duration <span style=color:#ff6ac1>=</span> (end_time <span style=color:#ff6ac1>-</span> start_time) <span style=color:#ff6ac1>*</span> <span style=color:#ff9f43>1000</span>
</span></span><span style=display:flex><span>        logging<span style=color:#ff6ac1>.</span>debug(<span style=color:#5af78e>f</span><span style=color:#5af78e>&#34;  Took </span><span style=color:#5af78e>{</span>duration<span style=color:#5af78e>:</span><span style=color:#5af78e>0.4f</span><span style=color:#5af78e>}</span><span style=color:#5af78e> ms&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>return</span> result
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> wrapper
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff9f43>@timer</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add(<span style=color:#ff9f43>3</span>, <span style=color:#ff9f43>4</span>)
</span></span><span style=display:flex><span><span style=color:#ff9f43>@debug</span>
</span></span><span style=display:flex><span><span style=color:#ff9f43>@timer</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>add(<span style=color:#ff9f43>5</span>, <span style=color:#ff9f43>6</span>)
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>run_once</span>(fn):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>wrapper</span>(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs):
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>if</span> <span style=color:#ff6ac1>not</span> wrapper<span style=color:#ff6ac1>.</span>has_run:
</span></span><span style=display:flex><span>            wrapper<span style=color:#ff6ac1>.</span>has_run <span style=color:#ff6ac1>=</span> <span style=color:#ff6ac1>True</span>
</span></span><span style=display:flex><span>            <span style=color:#ff6ac1>return</span> fn(<span style=color:#ff6ac1>*</span>args, <span style=color:#ff6ac1>**</span>kwargs)
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>else</span>:
</span></span><span style=display:flex><span>            <span style=color:#ff5c57>print</span>(<span style=color:#5af78e>&#34;NO! NOT ALLOWED!&#34;</span>)
</span></span><span style=display:flex><span>    wrapper<span style=color:#ff6ac1>.</span>has_run <span style=color:#ff6ac1>=</span> <span style=color:#ff6ac1>False</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> wrapper
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff9f43>@run_once</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>add</span>(a, b):
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> a <span style=color:#ff6ac1>+</span> b
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>print</span>(add(<span style=color:#ff9f43>6</span>, <span style=color:#ff9f43>7</span>))
</span></span><span style=display:flex><span><span style=color:#ff5c57>print</span>(add(<span style=color:#ff9f43>7</span>, <span style=color:#ff9f43>8</span>))
</span></span></code></pre></div><div class="relative max-w-xl mx-auto my-20"><div class="fancy_card horizontal"><div class=card_translator><div class="card_rotator tiny_rot card_layer"><div class="card_layer newsletter p-2"><div class="newsletter-inner h-full"><div class="relative h-full sib-form-container" id=sib-form-container><div class="mb-6 lg:mb-12 text-center"><h3 class="text-main-200 mb-2 lg:mb-8">Stay in the loop!</h3><p class="text-main-100 text-lg text-opacity-70">For new releases, exclusive giveaways, and reviews.</p></div><form action="https://Cosmiccoding.us5.list-manage.com/subscribe/post?u=aebe5de1d2e40dccb3aeca491&id=3987dd4a1f" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class="validate w-full" target=_blank novalidate><div><input type=email class="w-full appearance-none bg-main-600 mb-4 border border-main-600 bg-opacity-5 focus:border-main-300 rounded-sm px-4 py-3 text-main-100 placeholder-main-100 required" placeholder="Your best email…" aria-label="Your best email…" name=EMAIL required data-required=true id=EMAIL><div style=position:absolute;left:-5000px aria-hidden=true><input type=text name=b_aebe5de1d2e40dccb3aeca491_3987dd4a1f tabindex=-1></div><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class="button btn bg-main-600 hover:bg-main-400 shadow w-full"></div><p id=mce-error-response style=display:none class="text-center mt-2 opacity-50 text-main-200">There was a problem, please try again.</p><p id=mce-success-response style=display:none class="text-center mt-2 opacity-50 text-main-200">Thanks mate, won't let ya down.</p></form></div></div></div><div class="card_layer card_effect card_soft_glare" style=pointer-events:none></div></div></div></div></div></div><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script></div><script language=javascript type=text/javascript src=https://cosmiccoding.com.au/js/main.min.11673d10a962fb5205229607e62ea1d23424d35dad33db7bfe2a09a63d5409fa.js></script>
<script async defer src="https://www.googletagmanager.com/gtag/js?id=UA-72691106-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-72691106-1")</script></div></body></html>